{"name":"4w dashboard","tagline":"4W interactive dashboard","body":"<!--Created by Kyaw Naing Win, based on the concept of the work by Simon Johnson http://simonbjohnson.github.io/3W-Dashboard/-->\r\n<!DOCTYPE html>\r\n<html lang='en'>\r\n<head>\r\n<meta charset='utf-8'>\r\n<meta content='width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0' name='viewport'>\r\n\r\n<title>OCHA PAKISTAN: Who does What Where</title>\r\n \r\n<script src='js/d3.js' type='text/javascript'></script>\r\n<script src='js/crossfilter.js' type='text/javascript'></script>\r\n<script src='js/dc.js' type='text/javascript'></script>\r\n<script src='js/jquery-1.11.0.min.js' type='text/javascript'></script>\r\n<script src='js/js/bootstrap.min.js' type='text/javascript'></script>\r\n<script src=\"js/pcode_pak.js\"></script>\r\n<link href='css/bootstrap.min.css' rel='stylesheet' type='text/css'>\r\n<link href='css/dc.css' rel='stylesheet' type='text/css'>\r\n<style type=\"text/css\"></style> \r\n<style type=\"text/css\"></style>\r\n</head>\r\n<style type=\"text/css\">\r\n\tspan.heading {\r\n\tfont-size: 18px;\r\n\tcolor: blue;\t\r\n\t}\r\n\t#map1, #map2{\r\n\t border:1px;\r\n\t border-color: grey;\r\n\t background: #F0F0F0;\r\n\t}\r\n\t.dc-chart path {\r\n    stroke-width: 1;\r\n    stroke: #eee;\r\n    fill-opacity: 1;\r\n\t}\r\n\t.dc-chart .deselected path {\r\n    stroke-width: 1;\r\n    stroke: #ccc;\r\n    fill-opacity: 1;\r\n\t}\r\n\t\r\n</style> \r\n<body> \r\n<div class='container' id='main-container'>\r\n\t<div class='content'>\r\n\t\t<div class='container' style='font: 12px sans-serif;'>\r\n \r\n\t\t\t<div class='row'>\r\n\t\t\t\t<div class='span12'>\r\n\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<h3>Complex Emergency - KP and FATA - Who does What Where Dashboard</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t<div class=\"span6\"><strong>Latest data:</strong> 31st March 2014  </div>\r\n\t\t\t\t\t\t<div class=\"span6\">\r\n\t\t\t\t\t\t\t<a class=\"reset btn btn-primary btn-sm\" id=\"reset\" href=\"javascript:dc.filterAll();dc.redrawAll();\">\r\n\t\t\t\t\t\t\t\tReset All\r\n\t\t\t\t\t\t\t</a> ..click on chart elements or on map to see filtering effects\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\t\t\t\t\r\n\t\t\t\t\t<div class='row' id='row-chart-default'>\r\n\t\t\t\t\t\t<p><span class=\"heading\">By Projects</span><a href=\"javascript:map1Show();\"> - Show Map</a><p>\r\n\t\t\t\t\t\t<div class='span3' id='dc-donor-prj-chart'>\r\n\t\t\t\t\t\t\t<h6>Top ten Donors</h6>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='span3' id='dc-dist-prj-chart'>\r\n\t\t\t\t\t\t\t<h6>Top ten Districts</h6>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='span3' id='dc-cluster-prj-chart'>\r\n\t\t\t\t\t\t\t<h6>by Cluster</h6>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='pie-graph span3' id='dc-status-prj-chart'>\r\n\t\t\t\t\t\t\t<h6>by Status</h6>\r\n\t\t\t\t\t\t</div>\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<hr id=\"h_line\" />\r\n\t\t\t\t\t<div class='row' id='row-chart-default2'>\r\n\t\t\t\t\t\t<p><span class=\"heading\">By Activites</span><a href=\"javascript:map2Show();\"> - Show Map</a></p>\r\n\t\t\t\t\t\t<div class='span3' id='dc-donor-act-chart'>\r\n\t\t\t\t\t\t\t<h6>Top ten Donors</h6>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='span3' id='dc-dist-act-chart'>\r\n\t\t\t\t\t\t\t<h6>Top ten Districts</h6>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='span3' id='dc-cluster-act-chart'>\r\n\t\t\t\t\t\t\t<h6>by Cluster</h6>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='pie-graph span3' id='dc-status-act-chart'>\r\n\t\t\t\t\t\t\t<h6>by Status</h6>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class='row' id='row-chart-map1'>\r\n\t\t\t\t\t\t<p><span class=\"heading\">By Projects</span><a href=\"javascript:map2Show();\"> - show by Activities</a> ; <a href=\"javascript:defaultShow();\"> - show default</a></p>\r\n\t\t\t\t\t\t<div class='span6'>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div class='row'>\r\n\t\t\t\t\t\t\t\t<div class='span3' id='dc-donor-prj-chart2'>\r\n\t\t\t\t\t\t\t\t\t<h6>Top ten Donors</h6>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class='span3' id='dc-dist-prj-chart2'>\r\n\t\t\t\t\t\t\t\t\t<h6>Top ten Districts</h6>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class='row'>\r\n\t\t\t\t\t\t\t\t<div class='span3' id='dc-cluster-prj-chart2'>\r\n\t\t\t\t\t\t\t\t\t<h6>by Cluster</h6>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class='pie-graph span3' id='dc-status-prj-chart2'>\r\n\t\t\t\t\t\t\t\t\t<h6>by Status</h6>\r\n\t\t\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='span6' id='map1'></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class='row' id='row-chart-map2'>\r\n\t\t\t\t\t<p><span class=\"heading\">By Activites</span><a href=\"javascript:map1Show();\"> - show by Projects</a>; <a href=\"javascript:defaultShow();\"> - show default</a></p>\r\n\t\t\t\t\t\t<div class='span6'>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div class='row'>\r\n\t\t\t\t\t\t\t\t<div class='span3' id='dc-donor-act-chart2'>\r\n\t\t\t\t\t\t\t\t\t<h6>Top ten Donors</h6>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class='span3' id='dc-dist-act-chart2'>\r\n\t\t\t\t\t\t\t\t\t<h6>Top ten Districts</h6>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div class='row'>\t\r\n\t\t\t\t\t\t\t\t<div class='span3' id='dc-cluster-act-chart2'>\r\n\t\t\t\t\t\t\t\t\t<h6>by Cluster</h6>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class='pie-graph span3' id='dc-status-act-chart2'>\r\n\t\t\t\t\t\t\t\t\t<h6>by Status</h6>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='span6 ' id='map2'></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n \r\n\t\t\r\n \r\n\t\t\t<h6>Generated with\r\n\t\t\t<a href=\"http://nickqizhu.github.io/dc.js/\">dc.js</a>,\r\n\t\t\t<a href=\"http://square.github.io/crossfilter/\">crossfilter</a>,\r\n\t\t\t<a href=\"http://d3js.org/\">d3.js</a> and\r\n\t\t\t<a href=\"http://twitter.github.io/bootstrap/\">bootstrap</a>.\r\n\t\t\t</h6>\r\n\t\t\t<p> 4W data provided by IASC cluster lead agencies and compiled by <a href=\"http://pak.humanitarianresponse.info\">OCHA</a>.</p>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n\r\n<script>\r\n/**********************************\r\n* Step0: setup what to show *\r\n**********************************/\r\n/* display default charts */\r\n\r\nfunction defaultShow(){\r\n            $('#row-chart-default').show(); \r\n\t\t\t$('#row-chart-default2').show(); \r\n\t\t\t$('#h_line').show();\r\n            $('#row-chart-map1').hide();\r\n\t\t\t$('#row-chart-map2').hide();\r\n           // donorChart.filterAll();\r\n\t\t\tdc.filterAll();\r\n            dc.redrawAll();\r\n        }\r\n        \r\nfunction map1Show(){\r\n            $('#row-chart-map1').show();\r\n            $('#row-chart-map2').hide();\r\n\t\t\t$('#row-chart-default').hide(); \r\n\t\t\t$('#row-chart-default2').hide(); \r\n$('#h_line').hide();\t\t\t\r\n\t\t\t//donorChart.filterAll();\r\n\t\t\tdc.filterAll();\r\n            dc.redrawAll();\r\n        }\r\nfunction map2Show(){\r\n            $('#row-chart-map1').hide();\r\n            $('#row-chart-map2').show();\r\n\t\t\t$('#row-chart-default').hide(); \r\n\t\t\t$('#row-chart-default2').hide(); \r\n\t\t\t$('#h_line').hide();\r\n\t\t\t//donorChart.filterAll();\r\n\t\t\tdc.filterAll();\r\n            dc.redrawAll();\r\n\t    }\r\n$('#row-chart-default').show();\r\n$('#row-chart-default2').show();\r\n$('#h_line').show();\r\n$('#row-chart-map1').hide();\r\n$('#row-chart-map2').hide();\r\n \r\n\r\n\r\n/*\r\ndata.forEach(function(d) {\r\n\td.totalPerson=+d.total_person\t\r\n}); \r\n*/\r\n/******************************************************\r\n* Step1: Create the dc.js chart objects & link to divs *\r\n******************************************************/\r\n/* view-1 by projects */ \r\nvar donorPrjChart = dc.rowChart(\"#dc-donor-prj-chart\");\r\nvar distPrjChart = dc.rowChart(\"#dc-dist-prj-chart\");\r\nvar clusterPrjChart = dc.rowChart(\"#dc-cluster-prj-chart\");\r\nvar statusPrjChart =dc.pieChart(\"#dc-status-prj-chart\");\r\n\r\n/* view-1 by activities */ \r\nvar donorActChart = dc.rowChart(\"#dc-donor-act-chart\");\r\nvar distActChart = dc.rowChart(\"#dc-dist-act-chart\");\r\nvar clusterActChart = dc.rowChart(\"#dc-cluster-act-chart\");\r\nvar statusActChart =dc.pieChart(\"#dc-status-act-chart\");\r\n\r\n/* view-2 by porjects */\r\nvar donorPrjChart2 = dc.rowChart(\"#dc-donor-prj-chart2\");\r\nvar distPrjChart2 = dc.rowChart(\"#dc-dist-prj-chart2\");\r\nvar clusterPrjChart2 = dc.rowChart(\"#dc-cluster-prj-chart2\");\r\nvar statusPrjChart2 =dc.pieChart(\"#dc-status-prj-chart2\");\r\nvar mapChart1 = dc.geoChoroplethChart(\"#map1\");\r\n\r\n/* view-3 by activities */\r\nvar donorActChart2 = dc.rowChart(\"#dc-donor-act-chart2\");\r\nvar distActChart2 = dc.rowChart(\"#dc-dist-act-chart2\");\r\nvar clusterActChart2 = dc.rowChart(\"#dc-cluster-act-chart2\");\r\nvar statusActChart2 =dc.pieChart(\"#dc-status-act-chart2\");\r\nvar mapChart2 = dc.geoChoroplethChart(\"#map2\");\r\n\r\n//chart widths and heights\r\nvar w = 235;\r\nvar h = 200;\r\nvar pie_w = 160;\r\nvar pie_h = h; \r\n\r\n/********************************************************************\r\nfunction for map_reduce unique counts\r\n//the code is adopted and modified from http://jsfiddle.net/djmartin_umich/3LyhL/\r\n*********************************************************************/\r\n// unique counts of project title \r\nvar reduceAdd_Prj = function (p, d) {\r\n                if (d.projectTitle in p.projectTitle)\r\n\t\t\t\t\tp.projectTitle[d.projectTitle]++;\r\n                else {\r\n                    p.projectTitle[d.projectTitle] = 1;\r\n                    p.projectCount++;\r\n                }\r\n                return p;\r\n            };\r\nvar reduceRemove_Prj = function (p, d) {\r\n                p.projectTitle[d.projectTitle]--;\r\n                if (p.projectTitle[d.projectTitle] === 0) {\r\n                    delete p.projectTitle[d.projectTitle];\r\n                    p.projectCount--;\r\n                }\r\n                return p;\r\n            };\r\nvar reduceInitial_Prj = function () {\r\n                return {\r\n                    projectCount: 0,\r\n                    projectTitle: {}\r\n                };\r\n            }; \r\n//unique count of activities\r\nvar reduceAdd_Act = function (p, d) {\r\n\t\t\tif (d.activity in p.activity)\r\n\t\t\t\tp.activity[d.activity]++;\r\n\t\t\telse {\r\n\t\t\t\tp.activity[d.activity] = 1;\r\n\t\t\t\tp.activityCount++;\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\t};\r\n\r\nvar reduceRemove_Act = function (p, d) {\r\n\t\t\tp.activity[d.activity]--;\r\n\t\t\tif (p.activity[d.activity] === 0) {\r\n\t\t\t\tdelete p.activity[d.activity];\r\n\t\t\t\tp.activityCount--;\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\t};\r\n\r\nvar reduceInitial_Act =\tfunction () {\r\n\t\t\treturn {\r\n\t\t\t\tactivityCount: 0,\r\n\t\t\t\tactivity: {}\r\n\t\t\t}\r\n\t\t\r\n};\r\n/****************************************\r\n* Run the data through crossfilter *\r\n****************************************/\r\n// load data from a csv file\r\n d3.csv(\"Data/4Wdata.csv\", function (data) {\r\n \r\nvar cf = crossfilter(data); // Gets our 'data' into crossfilter\r\n\r\n/******************************************************\r\n* Create the Dimensions *\r\n* A dimension is something to group or filter by. *\r\n* Crossfilter can filter by exact value, or by range. *\r\n******************************************************/\r\n/* Dimensions for charts*/\r\nvar donor=cf.dimension (function(d){ return d.donor;});\r\nvar dist = cf.dimension(function(d) { return d.district;});\r\nvar cluster=cf.dimension(function(d) {return d.cluster;});\r\nvar status = cf.dimension(function(d){ return d.status;});\r\n/* by projects */\r\n\r\nvar donorCount=donor.group().reduce(reduceAdd_Prj, reduceRemove_Prj, reduceInitial_Prj);\r\nvar distCount=dist.group().reduce(reduceAdd_Prj, reduceRemove_Prj, reduceInitial_Prj);\r\nvar clusterCount=cluster.group().reduce(reduceAdd_Prj, reduceRemove_Prj, reduceInitial_Prj);\r\nvar statusCount=status.group().reduce(reduceAdd_Prj, reduceRemove_Prj, reduceInitial_Prj);\r\n\r\n/* by activity*/\r\nvar donorCount2=donor.group().reduce(reduceAdd_Act, reduceRemove_Act, reduceInitial_Act);\r\nvar distCount2=dist.group().reduce(reduceAdd_Act, reduceRemove_Act, reduceInitial_Act);\r\nvar clusterCount2=cluster.group().reduce(reduceAdd_Act, reduceRemove_Act, reduceInitial_Act);\r\nvar statusCount2=status.group().reduce(reduceAdd_Act, reduceRemove_Act, reduceInitial_Act);\r\n\r\n/* for mapping */\r\nvar distCodeDimension = cf.dimension(function(d) { return d.distCode; });\r\nvar distCodePrjGroup=distCodeDimension.group().reduce(reduceAdd_Prj, reduceRemove_Prj, reduceInitial_Prj);\r\nvar distCodeActGroup=distCodeDimension.group().reduce(reduceAdd_Act, reduceRemove_Act, reduceInitial_Act);\r\n\r\n/****************************************************************************\r\n* Step4: Create the Visualisations *\r\n*****************************************************************************/\r\n// Cluster Row Graph \r\ndonorPrjChart.width(w).height(h)\r\n                .dimension(donor)\r\n\t\t\t\t.group(donorCount)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.projectCount;\r\n\t\t\t\t})//borrowed code\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.projectCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by to ten values\r\n\t\t\t\t\r\n\t\t\t\t.ordering(function(d){ return -d.value.projectCount; }) //sorting by largest to smallest\r\n\t\t\t\t\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.projectCount+\")\"+d.key;})\r\n\t\t\t\t.colorAccessor(function (d){return 1;})                   \r\n                .elasticX(true)\r\n\t\t\t\t//.xAxis().tickFormat(function(v) {return v;});\r\n\t\t\t\t;\r\ndonorPrjChart2.width(w).height(h)\r\n                .dimension(donor)\r\n\t\t\t\t.group(donorCount)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.projectCount;\r\n\t\t\t\t})//borrowed code\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.projectCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by to ten values\r\n\t\t\t\t.ordering(function(d){ return -d.value.projectCount; }) //sorting by largest to smallest\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.projectCount+\")\"+d.key;})\r\n\t\t\t\t.colorAccessor(function (d){return 1;})                   \r\n                .elasticX(true)\r\n\t\t\t\t//.xAxis().tickFormat(function(v) {return v;});\r\n\t\t\t\t;\r\n\r\n// District Row Graph \r\ndistPrjChart.width(w).height(h)\r\n                .dimension(dist)\r\n                .group(distCount)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.projectCount;\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.projectCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\r\n\t\t\t\t.ordering(function(d){ return -d.value.projectCount; }) //sorting by largest to smallest\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.projectCount+\")\"+d.key;})\r\n\t\t\t\t\t\t\t\t.colorAccessor(function (d){return 1;})     \r\n\t\t\t\t.elasticX(true)\r\n\t\t\t\t//.xAxis().tickFormat(function(v) {return v;})\r\n\t\t\t\t;\r\ndistPrjChart2.width(w).height(h)\r\n                .dimension(dist)\r\n                .group(distCount)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.projectCount;\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.projectCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\r\n\t\t\t\t.ordering(function(d){ return -d.value.projectCount; }) //sorting by largest to smallest\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.projectCount+\")\"+d.key;})\r\n\t\t\t\t\t\t\t\t.colorAccessor(function (d){return 1;})     \r\n\t\t\t\t.elasticX(true)\r\n\t\t\t\t//.x(d3.scale.linear().domain([0, 160]))\r\n\t\t\t\t;\r\n\r\n// Cluster Row Graph\r\nclusterPrjChart.width(w).height(h)\r\n                .dimension(cluster)\r\n                .group(clusterCount)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.projectCount;\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.projectCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\t\t\r\n\t\t\t\t.ordering(function(d){ return -d.value.projectCount })\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.projectCount+\")\"+d.key;})\t\t\t\t\r\n\t\t\t\t.elasticX(true)\r\n\t\t\t\t//.x(d3.scale.linear().domain([0, 100]))\r\n\t\t\t\t//.xAxis().tickFormat(function(v) {return v;})\r\n\t\t\t\t;\r\nclusterPrjChart2.width(w).height(h)\r\n                .dimension(cluster)\r\n                .group(clusterCount)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.projectCount;\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.projectCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\t\t\r\n\t\t\t\t.ordering(function(d){ return -d.value.projectCount })\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.projectCount+\")\"+d.key;})\t\t\t\t\r\n\t\t\t\t.elasticX(true)\r\n\t\t\t\t//.x(d3.scale.linear().domain([0, 100]))\r\n\t\t\t\t//.xAxis().tickFormat(function(v) {return v;})\r\n\t\t\t\t;\r\n\r\n// Project status pie chart\t\t\t\t\r\nstatusPrjChart.width(pie_w).height(pie_h)\r\n\t\t\t\t//.margins({top: 10, right: 10, bottom: 20, left: 40})\r\n\t\t\t\t.dimension(status)\r\n                .group(statusCount)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.projectCount;\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.projectCount;}).top(Infinity);\r\n\t\t\t\t}) //this code is required to sort by top ten values\t\t\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.projectCount+\")\"+d.key;})\r\n                .innerRadius(10)\r\n                .colorAccessor(function(d, i){return i%4;})\r\n\t\t\t\t;\r\n\t\t\t\t\r\nstatusPrjChart2.width(pie_w).height(pie_h)\r\n\t\t\t\t//.margins({top: 10, right: 10, bottom: 20, left: 40})\r\n\t\t\t\t.dimension(status)\r\n                .group(statusCount)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.projectCount;\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.projectCount;}).top(Infinity);\r\n\t\t\t\t}) //this code is required to sort by top ten values\t\t\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.projectCount+\")\"+d.key;})\r\n                .innerRadius(10)\r\n                .colorAccessor(function(d, i){return i%4;})\r\n\t\t\t\t;\t\r\n\t\t\t\t\t\r\n/**********charts for activities ***************/\r\ndonorActChart.width(w).height(h)\r\n                .dimension(donor)\r\n\t\t\t\t.group(donorCount2)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.activityCount;\r\n\t\t\t\t})//borrowed code\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.activityCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\r\n\t\t\t\t\r\n\t\t\t\t.ordering(function(d){ return -d.value.activityCount; }) //sorting by largest to smallest\r\n\t\t\t\t\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.activityCount+\")\"+d.key;})\r\n\t\t\t\t.colorAccessor(function (d){return 1;})                   \r\n                .elasticX(true)\t\t\t\t\t\t\r\n\t\t\t\t//.xAxis().tickFormat(function(v) {return v;});\r\n\t\t\t\t;\r\ndonorActChart2.width(w).height(h)\r\n                .dimension(donor)\r\n\t\t\t\t.group(donorCount2)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.activityCount;\r\n\t\t\t\t})//borrowed code\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.activityCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\r\n\t\t\t\t\r\n\t\t\t\t.ordering(function(d){ return -d.value.activityCount; }) //sorting by largest to smallest\r\n\t\t\t\t\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.activityCount+\")\"+d.key;})\r\n\t\t\t\t.colorAccessor(function (d){return 1;})                   \r\n                .elasticX(true)\t\t\t\t\t\t\r\n\t\t\t\t//.xAxis().tickFormat(function(v) {return v;});\r\n\t\t\t\t;\r\n// District Row Graph \r\ndistActChart.width(w).height(h)\r\n                .dimension(dist)\r\n                .group(distCount2)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.activityCount;\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.activityCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\r\n\t\t\t\t.ordering(function(d){ return -d.value.activityCount; }) //sorting by largest to smallest\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.activityCount+\")\"+d.key;})\r\n\t\t\t\t\t\t\t\t.colorAccessor(function (d){return 1;})     \r\n\t\t\t\t.elasticX(true)\r\n\t\t\t\t//.x(d3.scale.linear().domain([0, 160]))\r\n\t\t\t\t;\r\n\t\t\t\t\r\ndistActChart2.width(w).height(h)\r\n                .dimension(dist)\r\n                .group(distCount2)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.activityCount;\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.activityCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\r\n\t\t\t\t.ordering(function(d){ return -d.value.activityCount; }) //sorting by largest to smallest\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.activityCount+\")\"+d.key;})\r\n\t\t\t\t.colorAccessor(function (d){return 1;})     \r\n\t\t\t\t.elasticX(true)\r\n\t\t\t\t//.x(d3.scale.linear().domain([0, 160]))\r\n\t\t\t\t;\t\t\t\t\r\n\t\t\t\t\r\n// Cluster Row Graph\r\nclusterActChart.width(w).height(h)\r\n                .dimension(cluster)\r\n                .group(clusterCount2)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.activityCount;\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.activityCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\t\t\r\n\t\t\t\t.ordering(function(d){ return -d.value.activityCount; })\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.activityCount+\")\"+d.key;})\t\t\t\t\r\n\t\t\t\t.elasticX(true)\r\n\t\t\t\t//.x(d3.scale.linear().domain([0, 100]))\r\n\t\t\t\t//.xAxis().tickFormat(function(v) {return v;})\r\n\t\t\t\t;\r\n\r\nclusterActChart2.width(w).height(h)\r\n                .dimension(cluster)\r\n                .group(clusterCount2)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.activityCount;\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.activityCount;}).top(10);\r\n\t\t\t\t}) //this code is required to sort by top ten values\t\t\r\n\t\t\t\t.ordering(function(d){ return -d.value.activityCount; })\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.activityCount+\")\"+d.key;})\t\t\t\t\r\n\t\t\t\t.elasticX(true)\r\n\t\t\t\t//.x(d3.scale.linear().domain([0, 100]))\r\n\t\t\t\t//.xAxis().tickFormat(function(v) {return v;})\r\n\t\t\t\t;\r\n\t\t\t\t\r\n// Project status pie chart\t\t\t\t\r\nstatusActChart.width(pie_w).height(pie_h)\r\n\t\t\t\t//.margins({top: 10, right: 10, bottom: 20, left: 40})\r\n\t\t\t\t.dimension(status)\r\n                .group(statusCount2)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.activityCount;\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.activityCount;}).top(Infinity);\r\n\t\t\t\t}) //this code is required to sort by top ten values\t\t\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.activityCount+\")\"+d.key;})\r\n                .innerRadius(10)\r\n                .colorAccessor(function(d, i){return i%4;})\r\n\t\t\t\t;\r\nstatusActChart2.width(pie_w).height(pie_h)\r\n\t\t\t\t//.margins({top: 10, right: 10, bottom: 20, left: 40})\r\n\t\t\t\t.dimension(status)\r\n                .group(statusCount2)\r\n\t\t\t\t.valueAccessor(function (d) {\r\n\t\t\t\t\treturn d.value.activityCount;\r\n\t\t\t\t})\r\n\t\t\t\t.data(function(d) {\r\n\t\t\t\t\treturn d.order(function (d){return d.activityCount;}).top(Infinity);\r\n\t\t\t\t}) //this code is required to sort by top ten values\t\t\r\n\t\t\t\t.label(function(d){return \"(\"+d.value.activityCount+\")\"+d.key;})\r\n                .innerRadius(10)\r\n                .colorAccessor(function(d, i){return i%4;})\r\n\t\t\t\t;\r\n\r\n//********** Map ****************\r\n\r\nd3.json(\"Data/pak_districts.json\", function (distJSON){\r\n\t\t\t\tmapChart1.width(460).height(460)\r\n\t\t\t\t\t.dimension(distCodeDimension)\r\n\t\t\t\t\t.group(distCodePrjGroup)\r\n\t\t\t\t\t.colors(d3.scale.quantize().range([\"#C4E4FF\", \"#9ED2FF\", \"#81C5FF\", \"#6BBAFF\", \"#51AEFF\", \"#36A2FF\", \"#1E96FF\", \"#0089FF\", \"#0061B5\"])) //\"#E2F2FF\", \r\n                    .colorDomain([0, 22])\r\n                    .colorCalculator(function (d) { return d.projectCount ? mapChart1.colors()(d.projectCount) : '#ccc'; })\r\n\t\t\t\t\t.overlayGeoJson(distJSON.features, \"DISTRICT\", function (d) {\r\n\t\t\t\t\t\treturn d.properties.DIST_C_STR;\r\n\t\t\t\t\t\t//return d.properties.DISTRICT;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.projection(d3.geo.mercator().center([74.75,33.5]).scale(4500))\r\n\t\t\t\t\t.title(function (d) {\r\n\t\t\t\t\t\treturn \"District: \" + dcode2dist[d.key];\r\n\t\t\t\t\t\t//return \"District: \" + d.key ;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t;\r\n\t\t\t\tmapChart2.width(460).height(460)\r\n\t\t\t\t\t.dimension(distCodeDimension)\r\n\t\t\t\t\t.group(distCodeActGroup)\r\n\t\t\t\t\t.colors(d3.scale.quantize().range([\"#C4E4FF\", \"#9ED2FF\", \"#81C5FF\", \"#6BBAFF\", \"#51AEFF\", \"#36A2FF\", \"#1E96FF\", \"#0089FF\", \"#0061B5\"])) //\"#E2F2FF\", \r\n                    .colorDomain([0, 85])\r\n                    .colorCalculator(function (d) { return d.activityCount ? mapChart2.colors()(d.activityCount) : '#ccc'; })\r\n\t\t\t\t\t.overlayGeoJson(distJSON.features, \"DISTRICT\", function (d) {\r\n\t\t\t\t\t\treturn d.properties.DIST_C_STR;\r\n\t\t\t\t\t\t//return d.properties.DISTRICT;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.projection(d3.geo.mercator().center([74.75,33.5]).scale(4500))\r\n\t\t\t\t\t.title(function (d) {\r\n\t\t\t\t\t\treturn \"District: \" + dcode2dist[d.key] ;\r\n\t\t\t\t\t\t//return \"District: \" + d.key;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\r\n/****************************\r\n* Step6: Render the Charts *\r\n****************************/\r\n\r\n\t\t\tdc.renderAll();\r\n\r\n  });\t\t\t\r\n});\r\n\r\n</script>\r\n\r\n</body>\r\n</html>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}